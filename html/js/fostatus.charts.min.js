/*
 * FOstatus by Rotators
 * https://github.com/rotators/fodev-status/
 *
 * @preserve
 */
function FOstatusCharts(){}FOstatusCharts.prototype.ConvertTimestamp=function(e){return 1e3*e},FOstatusCharts.prototype.ConvertTimestampArray=function(e){var t=[],r=this;return $.each(e,function(e,n){2==n.length?t.push([r.ConvertTimestamp(n[0]),n[1]]):console.log("Invalid timestamp array (idx "+e+")")}),t},FOstatusCharts.prototype.BaseChart=function(e,t,r,n){var o={chart:{animation:!0,backgroundColor:null,id:e,renderTo:t,shadow:!0},colors:["#ffffff"],credits:{enabled:!1},exporting:{enabled:!0,scale:2},legend:{enabled:!0,backgroundColor:null,borderColor:null,itemStyle:{color:"#aeaeae"},itemHoverStyle:{color:"#fafafa"},itemHiddenStyle:{color:"#5e5e5e"}},spacingLeft:10,spacingRight:10};return null!=r&&(o.title={text:r,style:{color:"#fafafa"}}),null!=n&&(o.subtitle={text:n,style:{color:"#aeaeae"}}),o},FOstatusCharts.prototype.CreateTimeline=function(e,t,r,n,o){var a=this.BaseChart(e,t,r,n);return a.chart.type="spline",a.navigator={enabled:!0,series:{id:"nav",type:"areaspline",data:[]}},a.plotOptions={series:{pointRange:864e5,pointInterval:864e5,connectNulls:!1,dataGrouping:{dateTimeLabelFormats:{hour:["%e %B %Y"],day:["%e %B %Y"]}},shadow:!0}},a.rangeSelector={enabled:!0,selected:5,buttonTheme:{fill:"none",stroke:"#c0c0c0",style:{color:"#c0c0c0"},states:{hover:{fill:"none",stroke:"#c0c0c0",style:{color:"#ffffff"}},select:{fill:"#c0c0c0",stroke:"#c0c0c0",style:{color:"#000000"}}}},inputDateFormat:"%e %b %Y",inputEditDateFormat:"%d.%m.%Y",inputDateParser:function(e){return e=e.split("."),new Date(parseInt(e[2]),parseInt(e[1])-1,parseInt(e[0])+1)},inputStyle:{color:"#aaaaaa"}},a.scrollbar={rifleColor:"#191919",trackBackgroundColor:"none",trackBorderColor:"none"},a.spacingLeft=10,a.spacingRight=10,a.tooltip={shared:!0,xDateFormat:"%e %B %Y"},a.xAxis={type:"datetime"},a.yAxis={min:0,lineWidth:1},null!=o&&(a.yAxis.title={text:o}),a},FOstatusCharts.prototype.BuildTimeline=function(e,t,r,n,o){var a=this;ShowInfo("Preloading..."),fo.LoadJSONQueue(!1,dataDir,["average_short",r],function(n){var i;null!=n.average_short&&null!=n.average_short.server&&(i=n.average_short.server),null!=n.history&&(ShowInfo("Loading summary..."),t.get("nav").setData(a.ConvertTimestampArray(n.history)),t.get("nav").xAxis.setExtremes()),n=null;var s=[];if(ShowInfo("Checking arguments..."),$.each(fo.GetServersArray("name"),function(t,r){if(null!=i&&null==i[r.id])return!0;var n=!1;0==e.length?n=!0:e.length>0&&$.inArray(r.id,e)>=0&&(n=!0),null!=r.singleplayer&&r.singleplayer&&(n=!1),n&&s.push(r.id)}),0==s.length){var l=rootDir+"/"+r+"/";window.location!=l&&(console.log("Redirecting: "+l),window.location=l)}var c=[];ShowInfo("Loading servers data..."),$.each(s,function(e,n){c.push(fo.LoadJSON(dataDir+fo.GetPath("server_"+r,{ID:n}),"server_"+r,function(r){var o={id:n,index:e,legendIndex:e,data:a.ConvertTimestampArray(r.server[n])};$.each(["name","color"],function(e,t){var r=fo.GetServerOption(n,t);null!=r&&(o[t]=r)}),t.addSeries(o,!0).xAxis.setExtremes()}))}),$.when.apply($,c).done(function(){o()})})},FOstatusCharts.prototype.CreatePercentPie=function(e,t,r,n,o){var a=this.BaseChart(e,t,r,n);return a.chart.type="pie",a.plotOptions={pie:{borderColor:"#cacaca",allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:'<span style="fill: {point.color}">{point.name}</span> ({point.percentage:.1f}%)'},showInLegend:!0}},a.tooltip={pointFormat:"{series.name}: <strong>{point.y}</strong>"},a.series=[{type:"pie"}],null!=o&&(a.series[0].name=o),a},FOstatusCharts.prototype.CreateStackedColumn=function(e,t,r,n){var o=this.BaseChart(e,t,r,n);return o.chart.type="column",o.xAxis={categories:[]},o.plotOptions={column:{stacking:"normal"}},o},FOstatusCharts.prototype.GetVisibleSeries=function(e){var t=[];return $.each(e.series,function(e,r){return r.visible?null==r.options?!0:null!=r.options.isInternal&&r.options.isInternal?!0:void(null!=r.options.id&&t.push(r.options.id)):!0}),t.sort(),t},FOstatusCharts.prototype.GetHiddenSeries=function(e){var t=[];return $.each(e.series,function(e,r){return r.visible?!0:null==r.options?!0:null!=r.options.isInternal&&r.options.isInternal?!0:void(null!=r.options.id&&t.push(r.options.id))}),t.sort(),t};