/*
 * FOstatus by Rotators
 * https://github.com/rotators/fodev-status/
 *
 * @preserve
 */
function start(){$("#footer").hide(),ShowInfo("Loading..."),fo.LoadConfig(configFile,function(){chart=foCharts.CreateStackedColumn("fonline","chart","FOnline","Leaderboard"),chart.series=[{name:"Availability",color:fo.GetOption("colors","availability"),tooltip:{valueSuffix:"%"},data:[]},{name:"Maximum players",color:fo.GetOption("colors","players"),data:[]},{name:"Average players",color:fo.GetOption("colors","average"),data:[]}],chart.xAxis.labels={formatter:function(){var e="#ffffff",a=this.value,r=fo.GetServerBy("name",a);return null!=r&&null!=r.color&&(e=r.color),'<span style="fill: '+e+';">'+a+"</span>"}},chart=new Highcharts.Chart(chart),fo.LoadJSONQueue(!1,dataDir,["lifetime","max_players","average_short"],function(e){null!=e.lifetime&&(lifetime=e.lifetime),null!=e.max_players&&(players=e.max_players),null!=e.average_short&&(average=e.average_short),update(),$("#show_closed").click(function(){update()}),$("#footer").show(),HideInfo()})})}function update(){var e=$("#show_closed").prop("checked"),a=[],r=[];$.each(fo.GetServersArray("name"),function(l,i){if(null!=i.singleplayer&&1==i.singleplayer)return!0;var t=!1,o=[];if(null!=lifetime&&null!=lifetime.server[i.id]){t=!0;var s=100*lifetime.server[i.id].days_online/lifetime.server[i.id].days_known;o.push(parseInt(s))}else o.push(0);return null!=players&&null!=players.server[i.id]?(t=!0,o.push(players.server[i.id].players)):o.push(0),null!=average&&null!=average.server[i.id]?(t=!0,o.push(average.server[i.id])):o.push(0),t&&(e||null==i.closed||1!=i.closed)?(a.push(i.name),void $.each(o,function(e,a){null==r[e]&&r.push([]),r[e].push(a)})):!0}),chart.xAxis[0].setCategories(a),$.each(r,function(e,a){chart.series[e].setData(a,!0)})}var chart,lifetime,players,average;