/*
 * FOstatus by Rotators
 * https://github.com/rotators/fodev-status/
 *
 * @preserve
 */
function start(){var e=foCharts.CreateTimeline("fonline","chart");e.navigator=e.scrollbar={enabled:!1},e=Highcharts.StockChart(e),fo.LoadConfig(configFile,function(){var a=[];ShowInfo("Loading data..."),a.push(fo.LoadJSON(dataDir+fo.GetPath("servers"),"servers",function(a){var r={data:foCharts.ConvertTimestampArray(a),name:"Servers",id:"servers",index:0,legendIndex:0,color:fo.GetOption("colors","servers")};e.addSeries(r,!0).update()})),a.push(fo.LoadJSON(dataDir+fo.GetPath("history"),"history",function(a){var r={data:foCharts.ConvertTimestampArray(a),name:"Players",id:"players",index:1,legendIndex:1,color:fo.GetOption("colors","players")};e.addSeries(r,!0).update()})),a.push(fo.LoadJSON(dataDir+fo.GetPath("average"),"average",function(a){var r={data:foCharts.ConvertTimestampArray(a),name:"Average",id:"average",index:2,legendIndex:2,color:fo.GetOption("colors","average")};e.addSeries(r,!0).update()})),a.push(fo.LoadJSON(dataDir+fo.GetPath("max_players"),"max_players",function(a){var r={data:[],type:"flags",shape:"squarepin",onSeries:"players",legendIndex:3,name:"Servers records",color:fo.GetOption("colors","record")},o=[];$.each(fo.GetServersArray("name"),function(e,t){if(null==a.server[t.id])return!0;var n="record-"+t.id,i={id:n,x:foCharts.ConvertTimestamp(a.server[t.id].timestamp),title:t.name+" record",text:t.name+": "+a.server[t.id].players};o.push(n),$.each(["color"],function(e,a){var r=fo.GetServerOption(t.id,a);null!=r&&(i[a]=r)}),r.data.push(i)}),r.data.length>0&&(r.data.sort(function(e,a){return e.x==a.x?0:e.x>a.x?1:-1}),e.addSeries(r,!0).update())})),$.when.apply($,a).done(function(){ShowInfo("Finishing..."),e.redraw(),e.reflow(),HideInfo()})})}